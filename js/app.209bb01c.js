(function(t){function e(e){for(var n,i,a=e[0],c=e[1],u=e[2],l=0,f=[];l<a.length;l++)i=a[l],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&f.push(r[i][0]),r[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(f.length)f.shift()();return s.push.apply(s,u||[]),o()}function o(){for(var t,e=0;e<s.length;e++){for(var o=s[e],n=!0,a=1;a<o.length;a++){var c=o[a];0!==r[c]&&(n=!1)}n&&(s.splice(e--,1),t=i(i.s=o[0]))}return t}var n={},r={app:0},s=[];function i(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=n,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/shownote/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var d=c;s.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"0028":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"detail",attrs:{id:"notebook-list"}},[o("header",[o("a",{staticClass:"btn",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onCreate(e)}}},[o("i",{staticClass:"iconfont icon-plus"}),t._v(" 新建笔记本")])]),o("main",[o("div",{staticClass:"layout"},[o("h3",[t._v("笔记本列表("+t._s(t.notebooks.length)+")")]),o("div",{staticClass:"book-list"},t._l(t.notebooks,(function(e){return o("router-link",{key:e.id,staticClass:"notebook",attrs:{to:"/note?notebookId="+e.id}},[o("div",[o("span",{staticClass:"iconfont icon-notebook"}),t._v(" "+t._s(e.title)+" "),o("span",[t._v(t._s(e.noteCounts))]),o("span",{staticClass:"action",on:{click:function(o){return o.stopPropagation(),o.preventDefault(),t.onEdit(e)}}},[t._v("编辑")]),o("span",{staticClass:"action",on:{click:function(o){return o.stopPropagation(),o.preventDefault(),t.onDelete(e)}}},[t._v("删除")]),o("span",{staticClass:"date"},[t._v(t._s(e.friendlyCreatedAt))])])])})),1)])])])},r=[],s=o("5530"),i=(o("49c2"),o("135c"),o("d3c3"),o("2f62")),a={data:function(){return{}},created:function(){this.checkLogin({path:"/login"}),this.getNotebooks()},computed:Object(s["a"])({},Object(i["c"])(["notebooks"])),methods:Object(s["a"])(Object(s["a"])({},Object(i["b"])(["getNotebooks","addNotebook","updateNotebook","deleteNotebook","checkLogin"])),{},{onCreate:function(){var t=this;this.$prompt("输入新笔记本标题","创建笔记本",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^.{1,30}$/,inputErrorMessage:"标题不能为空，且不超过30个字符"}).then((function(e){var o=e.value;t.addNotebook({title:o})}))},onEdit:function(t){var e=this;this.$prompt("输入新笔记本标题","修改笔记本",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^.{1,30}$/,inputValue:t.title,inputErrorMessage:"标题不能为空，且不超过30个字符"}).then((function(o){var n=o.value;e.updateNotebook({notebookId:t.id,title:n})}))},onDelete:function(t){var e=this;this.$confirm("确认要删除笔记本吗","删除笔记本",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.deleteNotebook({notebookId:t.id})}))}})},c=a,u=(o("67fd"),o("2877")),d=Object(u["a"])(c,n,r,!1,null,"0eebcb7b",null);e["default"]=d.exports},"034f":function(t,e,o){"use strict";o("85ec")},"128e":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"detail",attrs:{id:"note"}},[o("note-sidebar",{on:{"update:notes":function(e){return t.notes=e}}}),o("div",{staticClass:"note-detail"},[o("div",{directives:[{name:"show",rawName:"v-show",value:!t.curNote.id,expression:"!curNote.id"}],staticClass:"note-empty"},[t._v("请选择笔记")]),o("div",{directives:[{name:"show",rawName:"v-show",value:t.curNote.id,expression:"curNote.id"}],staticClass:"note-detail-ct"},[o("div",{staticClass:"note-bar"},[o("span",[t._v(" 创建日期: "+t._s(t.curNote.createdAtFriendly))]),o("span",[t._v(" 更新日期: "+t._s(t.curNote.updatedAtFriendly))]),o("span",[t._v(" "+t._s(t.statusText))]),o("span",{staticClass:"iconfont icon-delete",on:{click:t.onDeleteNote}}),o("span",{staticClass:"iconfont icon-fullscreen",on:{click:function(e){t.isShowPreview=!t.isShowPreview}}})]),o("div",{staticClass:"note-title"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.curNote.title,expression:"curNote.title"}],attrs:{type:"text",placeholder:"输入标题"},domProps:{value:t.curNote.title},on:{input:[function(e){e.target.composing||t.$set(t.curNote,"title",e.target.value)},t.onUpdateNote],keydown:function(e){t.statusText="正在输入..."}}})]),o("div",{staticClass:"editor"},[o("textarea",{directives:[{name:"show",rawName:"v-show",value:!t.isShowPreview,expression:"!isShowPreview"},{name:"model",rawName:"v-model",value:t.curNote.content,expression:"curNote.content"}],attrs:{placeholder:"输入内容, 支持 markdown 语法"},domProps:{value:t.curNote.content},on:{input:[function(e){e.target.composing||t.$set(t.curNote,"content",e.target.value)},t.onUpdateNote],keydown:function(e){t.statusText="正在输入..."}}}),o("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowPreview,expression:"isShowPreview"}],staticClass:"preview markdown-body",domProps:{innerHTML:t._s(t.previewContent)}})])])])],1)},r=[],s=(o("ac1f"),o("5319"),o("5530")),i=(o("49c2"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"note-sidebar"},[o("span",{staticClass:"btn add-note",on:{click:t.onAddNote}},[t._v("添加笔记")]),o("el-dropdown",{staticClass:"notebook-title",attrs:{placement:"bottom"},on:{command:t.handleCommand}},[o("span",{staticClass:"el-dropdown-link"},[t._v(" "+t._s(t.curBook.title)+" "),o("svg",{staticClass:"icon iconfont",attrs:{"aria-hidden":"true"}},[o("use",{attrs:{"xlink:href":"#icon-down"}})])]),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t._l(t.notebooks,(function(e){return o("el-dropdown-item",{key:e.id,attrs:{command:e.id}},[t._v(t._s(e.title)+" ")])})),o("el-dropdown-item",{attrs:{command:"trash"}},[t._v("回收站")])],2)],1),t._m(0),o("ul",{staticClass:"notes"},t._l(t.notes,(function(e){return o("li",{key:e.id},[o("router-link",{attrs:{to:"/note?noteId="+e.id+"&notebookId="+t.curBook.id}},[o("span",{staticClass:"date"},[t._v(t._s(e.updatedAtFriendly))]),o("span",{staticClass:"title"},[t._v(t._s(e.title))])])],1)})),0)],1)}),a=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"menu"},[o("div",[t._v("更新时间")]),o("div",[t._v("标题")])])}],c=(o("135c"),o("29cf")),u=(o("90e8"),o("2f62"));window.Notes=c["a"];var d={created:function(){var t=this;this.getNotebooks().then((function(){return t.setCurBook({curBookId:t.$route.query.notebookId}),t.getNotes({notebookId:t.curBook.id})})).then((function(){t.setCurNote({curNoteId:t.$route.query.noteId}),t.$router.replace({path:"/note",query:{noteId:t.curNote.id,noteBookId:t.curBook.id}})}))},data:function(){return{}},computed:Object(s["a"])({},Object(u["c"])(["notebooks","notes","curBook","curNote"])),methods:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(u["d"])(["setCurBook","setCurNote"])),Object(u["b"])(["getNotebooks","getNotes","addNote"])),{},{handleCommand:function(t){var e=this;if("trash"==t)return this.$router.push({path:"trash"});this.$store.commit("setCurBook",{curBookId:t}),this.getNotes({notebookId:this.curBook.id}).then((function(){e.setCurNote(),e.$router.replace({path:"/note",query:{noteId:e.curNote.id,notebookId:e.curBook.id}})}))},onAddNote:function(){this.addNote({notebookId:this.curBook.id})}})},l=d,f=(o("3cd3"),o("2877")),h=Object(f["a"])(l,i,a,!1,null,null,null),p=h.exports,v=o("2ef0"),b=o.n(v),m=o("d4cd"),g=o.n(m),N=new g.a,k={components:{NoteSidebar:p},data:function(){return{statusText:"笔记未改动",isShowPreview:!1}},created:function(){this.checkLogin({path:"/login"})},computed:Object(s["a"])(Object(s["a"])({},Object(u["c"])(["notes","curNote"])),{},{previewContent:function(){return N.render(this.curNote.content||"")}}),methods:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(u["d"])(["setCurNote"])),Object(u["b"])(["updateNote","deleteNote","checkLogin"])),{},{onUpdateNote:b.a.debounce((function(){var t=this;this.curNote.id&&this.updateNote({noteId:this.curNote.id,title:this.curNote.title,content:this.curNote.content}).then((function(e){t.statusText="已保存"})).catch((function(e){t.statusText="保存出错"}))}),300),onDeleteNote:function(){var t=this;this.deleteNote({noteId:this.curNote.id}).then((function(e){t.$router.replace({path:"/note"})}))}}),beforeRouteUpdate:function(t,e,o){console.log("beforeRouteUpdata"),this.isShowPreview=!1,this.setCurNote({curNoteId:t.query.noteId}),o()}},w=k,_=(o("5c98"),Object(f["a"])(w,n,r,!1,null,"28d618a9",null));e["default"]=_.exports},"135c":function(t,e,o){"use strict";o("4160"),o("d3b7"),o("ac1f"),o("5319"),o("159b");var n=o("2b7c"),r=o("d3c3"),s={GET:"/notebooks",ADD:"/notebooks",UPDATE:"/notebooks/:id",DELETE:"/notebooks/:id"};e["a"]={getAll:function(){return new Promise((function(t,e){Object(n["a"])(s.GET).then((function(e){e.data=e.data.sort((function(t,e){return t.createAt<e.createAt})),e.data.forEach((function(t){t.createdAtFriendly=Object(r["a"])(t.createdAt),t.updatedAtFriendly=Object(r["a"])(t.updatedAt)})),t(e)})).catch((function(t){e(t)}))}))},updateNotebook:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{title:""},o=e.title,r=void 0===o?"":o;return Object(n["a"])(s.UPDATE.replace(":id",t),"PATCH",{title:r})},deleteNotebook:function(t){return Object(n["a"])(s.DELETE.replace(":id",t),"DELETE")},addNotebook:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{title:""},e=t.title,o=void 0===e?"":e;return new Promise((function(t,e){Object(n["a"])(s.ADD,"POST",{title:o}).then((function(e){e.data.createdAtFriendly=Object(r["a"])(e.data.createAt),e.data.updatedAtFriendly=Object(r["a"])(e.data.updatedAt),t(e)})).catch((function(t){e(t)}))}))}}},"137e":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"detail",attrs:{id:"trash"}},[o("div",{staticClass:"note-sidebar"},[o("h3",{staticClass:"notebook-title"},[t._v("回收站")]),t._m(0),o("ul",{staticClass:"notes"},t._l(t.trashNotes,(function(e){return o("li",{key:e.id},[o("router-link",{attrs:{to:"/trash?noteId="+e.id}},[o("span",{staticClass:"date"},[t._v(t._s(e.updatedAtFriendly))]),o("span",{staticClass:"title"},[t._v(t._s(e.title))])])],1)})),0)]),o("div",{staticClass:"note-detail"},[o("div",{staticClass:"note-bar"},[o("span",[t._v("创建日期："+t._s(t.curTrashNote.createdAtFriendly))]),o("span",[t._v("更新日期："+t._s(t.curTrashNote.updatedAtFriendly))]),o("span",[t._v("所属笔记本："+t._s(t.belongTo))]),o("a",{staticClass:"btn action",on:{click:t.onRevert}},[t._v("恢复")]),o("a",{staticClass:"btn action",on:{click:t.onDelete}},[t._v("彻底删除")])]),o("div",{staticClass:"note-title"},[o("span",[t._v(t._s(t.curTrashNote.title))])]),o("div",{staticClass:"editor"},[o("div",{staticClass:"preview markdown-body",domProps:{innerHTML:t._s(t.compileMarkdown)}})])])])},r=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"menu"},[o("div",[t._v("更新时间")]),o("div",[t._v("标题")])])}],s=(o("ac1f"),o("5319"),o("5530")),i=(o("49c2"),o("d4cd")),a=o.n(i),c=(o("d709"),o("2f62")),u=new a.a,d={data:function(){return{}},created:function(){var t=this;this.checkLogin({path:"/login"}),this.getNotebooks(),this.getTrashNotes().then((function(){t.setCurTrashNote({curTrashNoteId:t.$route.query.noteId}),t.$router.replace({path:"/trash",query:{noteId:t.curTrashNote.id}}).catch((function(t){return t}))}))},computed:Object(s["a"])(Object(s["a"])({},Object(c["c"])(["belongTo","trashNotes","curTrashNote"])),{},{compileMarkdown:function(){return u.render(this.curTrashNote.content||"")}}),methods:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(c["d"])(["setCurTrashNote"])),Object(c["b"])(["checkLogin","getTrashNotes","deleteTrashNote","revertTrashNote","getNotebooks"])),{},{onDelete:function(){var t=this;this.$confirm("此操作将永久删除该笔记, 是否继续?","永久删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return t.deleteTrashNote({noteId:t.curTrashNote.id})})).then((function(){t.setCurTrashNote(),console.log("revert"),t.$router.replace({path:"/trash",query:{noteId:t.curTrashNote.id}})}))},onRevert:function(){var t=this;this.revertTrashNote({noteId:this.curTrashNote.id}).then((function(){t.setCurTrashNote(),console.log("revert"),t.$router.replace({path:"/trash",query:{noteId:t.curTrashNote.id}})}))}}),beforeRouteUpdate:function(t,e,o){console.log(t),this.setCurTrashNote({curTrashNoteId:t.query.noteId}),o()}},l=d,f=(o("f683"),o("2877")),h=Object(f["a"])(l,n,r,!1,null,"388d0e0c",null);e["default"]=h.exports},"29cf":function(t,e,o){"use strict";o("d81d"),o("d3b7"),o("ac1f"),o("5319");var n=o("2b7c"),r=o("d3c3"),s={GET:"/notes/from/:notebookId",ADD:"/notes/to/:notebookId",UPDATE:"/notes/:noteId",DELETE:"/notes/:noteId"};e["a"]={getAll:function(t){var e=t.notebookId;return new Promise((function(t,o){Object(n["a"])(s.GET.replace(":notebookId",e)).then((function(e){e.data=e.data.map((function(t){return t.createdAtFriendly=Object(r["a"])(t.createdAt),t.updatedAtFriendly=Object(r["a"])(t.updatedAt),t})).sort((function(t,e){return t.updatedAt<e.updatedAt})),t(e)})).catch((function(t){o(t)}))}))},updateNote:function(t,e){var o=t.noteId,r=e.title,i=e.content;return Object(n["a"])(s.UPDATE.replace(":noteId",o),"PATCH",{title:r,content:i})},deleteNote:function(t){var e=t.noteId;return Object(n["a"])(s.DELETE.replace(":noteId",e),"DELETE")},addNote:function(t){var e=t.notebookId,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{title:"",content:""},i=o.title,a=void 0===i?"":i,c=o.content,u=void 0===c?"":c;return new Promise((function(t,o){Object(n["a"])(s.ADD.replace(":notebookId",e),"POST",{title:a,content:u}).then((function(e){e.data.createdAtFriendly=Object(r["a"])(e.data.createdAt),e.data.updatedAtFriendly=Object(r["a"])(e.data.updatedAt),t(e)})).catch((function(t){o(t)}))}))}}},"2b7c":function(t,e,o){"use strict";o.d(e,"a",(function(){return i}));o("d3b7");var n=o("bc3a"),r=o.n(n),s=o("5c96");function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(n,i){var a={url:t,method:e,validateStatus:function(t){return t>=200&&t<300||400===t}};"get"===e.toLowerCase()?a.params=o:a.data=o,r()(a).then((function(t){200===t.status?n(t.data):(s["Message"].error(t.data.msg),i(t.data))})).catch((function(){s["Message"].error("网络异常"),i({msg:"网络异常"})}))}))}r.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",r.a.defaults.baseURL="https://note-server.hunger-valley.com",r.a.defaults.withCredentials=!0},"3cd3":function(t,e,o){"use strict";o("77fe")},"49c2":function(t,e,o){"use strict";var n=o("2b7c"),r={REGISTER:"/auth/register",LOGIN:"/auth/login",LOGOUT:"/auth/logout",GET_INFO:"/auth"};e["a"]={register:function(t){var e=t.username,o=t.password;return Object(n["a"])(r.REGISTER,"POST",{username:e,password:o})},login:function(t){var e=t.username,o=t.password;return Object(n["a"])(r.LOGIN,"POST",{username:e,password:o})},logout:function(){return Object(n["a"])(r.LOGOUT)},getInfo:function(){return Object(n["a"])(r.GET_INFO)}}},"56d7":function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("2b0e"),r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("sidebar"),o("router-view")],1)},s=[],i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"sidebar"}},[o("avatar"),o("div",{staticClass:"icons"},[o("router-link",{attrs:{to:"/note",title:"笔记"}},[o("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[o("use",{attrs:{"xlink:href":"#icon-note"}})]),o("div",{staticClass:"text"},[t._v("笔记详情")])]),o("router-link",{attrs:{to:"/notebooks",title:"笔记本"}},[o("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[o("use",{attrs:{"xlink:href":"#icon-notebook"}})]),o("div",{staticClass:"text"},[t._v("笔记本列表")])]),o("router-link",{attrs:{to:"/trash",title:"回收站"}},[o("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[o("use",{attrs:{"xlink:href":"#icon-trash"}})]),o("div",{staticClass:"text"},[t._v("回收站")])])],1),o("div",{staticClass:"logout"},[o("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"},on:{click:t.onLogout}},[o("use",{attrs:{"xlink:href":"#icon-exit"}})]),o("div",{staticClass:"text"},[t._v("退出")])])],1)},a=[],c=o("5530"),u=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("span",{attrs:{title:t.username}},[t._v(t._s(t.slug))])},d=[],l=o("49c2"),f=(o("90e8"),o("2f62")),h={data:function(){return{}},created:function(){this.checkLogin()},methods:Object(c["a"])({},Object(f["b"])(["checkLogin"])),computed:Object(c["a"])({},Object(f["c"])(["username","slug"]))},p=h,v=(o("c6db"),o("2877")),b=Object(v["a"])(p,u,d,!1,null,"368ac6d4",null),m=b.exports,g={components:{Avatar:m},methods:Object(c["a"])(Object(c["a"])({},Object(f["b"])(["logout"])),{},{onLogout:function(){this.logout({path:"/login"})}})},N=g,k=(o("7121"),Object(v["a"])(N,i,a,!1,null,"6ae68245",null)),w=k.exports,_={components:{sidebar:w}},T=_,O=(o("034f"),Object(v["a"])(T,r,s,!1,null,null,null)),I=O.exports,C=(o("d3b7"),o("8c4f")),j=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"home"},[o("img",{attrs:{alt:"Vue logo"}}),o("HelloWorld",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)},E=[],y=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"hello"},[o("el-row",[o("el-button",{on:{click:t.open}},[t._v("默认按钮")]),o("el-button",{attrs:{type:"primary"}},[t._v("主要按钮")]),o("el-button",{attrs:{type:"success"}},[t._v("成功按钮")]),o("el-button",{attrs:{type:"info"}},[t._v("信息按钮")]),o("el-button",{attrs:{type:"warning"}},[t._v("警告按钮")]),o("el-button",{attrs:{type:"danger"}},[t._v("危险按钮")])],1)],1)},A=[],x={name:"HelloWorld",props:{msg:String},methods:{open:function(){this.$message("open....")}}},P=x,$=(o("5fd5"),Object(v["a"])(P,y,A,!1,null,"05ca9644",null)),L=$.exports,D={name:"Home",components:{HelloWorld:L}},S=D,B=Object(v["a"])(S,j,E,!1,null,null,null);B.exports,o("578a"),o("0028"),o("128e"),o("137e");n["default"].use(C["a"]);var U=[{path:"/",alias:"/notebooks",component:function(){return Promise.resolve().then(o.bind(null,"0028"))}},{path:"/login",component:function(){return Promise.resolve().then(o.bind(null,"578a"))}},{path:"/note",component:function(){return Promise.resolve().then(o.bind(null,"128e"))}},{path:"/trash",component:function(){return Promise.resolve().then(o.bind(null,"137e"))}}],R=new C["a"]({routes:U}),M=R,F=(o("4de4"),o("7db0"),o("135c")),G=o("5c96"),V=o.n(G),q={notebooks:null,curBookId:null},H={notebooks:function(t){return t.notebooks||[]},curBook:function(t){return Array.isArray(t.notebooks)?t.curBookId?t.notebooks.find((function(e){return e.id==t.curBookId}))||{}:t.notebooks[0]:{}}},W={setNotebooks:function(t,e){t.notebooks=e.notebooks},addNotebook:function(t,e){t.notebooks.unshift(e.notebook)},updateNotebook:function(t,e){var o=t.notebooks.find((function(t){return t.id==e.notebookId}))||{};o.title=e.title},deleteNotebook:function(t,e){t.notebooks=t.notebooks.filter((function(t){return t.id!=e.notebookId}))},setCurBook:function(t,e){t.curBookId=e.curBookId}},J={getNotebooks:function(t){var e=t.commit,o=t.state;return null!==o.notebooks?Promise.resolve():F["a"].getAll().then((function(t){e("setNotebooks",{notebooks:t.data})}))},addNotebook:function(t,e){var o=t.commit;return F["a"].addNotebook({title:e.title}).then((function(t){o("addNotebook",{notebook:t.data}),G["Message"].success(t.msg)}))},updateNotebook:function(t,e){var o=t.commit;return F["a"].updateNotebook(e.notebookId,{title:e.title}).then((function(t){o("updateNotebook",{notebookId:e.notebookId,title:e.title})}))},deleteNotebook:function(t,e){var o=t.commit;return F["a"].deleteNotebook(e.notebookId).then((function(t){o("deleteNotebook",{notebookId:e.notebookId})}))}},z={state:q,getters:H,mutations:W,actions:J},Y=o("29cf"),Z={notes:null,curNoteId:null},K={notes:function(t){return t.notes||[]},curNote:function(t){return Array.isArray(t.notes)?t.curNoteId?t.notes.find((function(e){return e.id==t.curNoteId}))||{}:t.notes[0]||{}:{}}},Q={setNote:function(t,e){t.notes=e.notes},addNote:function(t,e){t.notes.unshift(e.note)},updateNote:function(t,e){var o=t.notes.find((function(t){return t.id===e.noteId}))||{};o.title=e.title,o.content=e.content},deleteNote:function(t,e){t.notes=t.notes.filter((function(t){return t.id!==e.noteId}))},setCurNote:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.curNoteId=e.curNoteId}},X={getNotes:function(t,e){var o=t.commit,n=e.notebookId;return Y["a"].getAll({notebookId:n}).then((function(t){o("setNote",{notes:t.data})}))},addNote:function(t,e){var o=t.commit,n=e.notebookId,r=e.title,s=e.content;return Y["a"].addNote({notebookId:n},{title:r,content:s}).then((function(t){o("addNote",{note:t.data}),G["Message"].success(t.msg)}))},updateNote:function(t,e){var o=t.commit,n=e.noteId,r=e.title,s=e.content;return Y["a"].updateNote({noteId:n},{title:r,content:s}).then((function(t){o("updateNote",{noteId:n,title:r,content:s})}))},deleteNote:function(t,e){var o=t.commit,n=e.noteId;return Y["a"].deleteNote({noteId:n}).then((function(t){o("deleteNote",{noteId:n}),G["Message"].success(t.msg)}))}},tt={state:Z,getters:K,mutations:Q,actions:X},et=o("d709"),ot={trashNotes:null,curTrashNoteId:null},nt={trashNotes:function(t){return t.trashNotes||[]},curTrashNote:function(t,e){return t.curTrashNoteId?t.trashNotes.find((function(e){return e.id==t.curTrashNoteId}))||{}:e.trashNotes[0]||{}},belongTo:function(t,e,o,n){console.log(o,n);var r=n.notebooks.find((function(t){return t.id==e.curTrashNote.notebookId}))||{};return r.title||r.id||""}},rt={setTrashNotes:function(t,e){t.trashNotes=e.trashNotes},addTrashNote:function(t,e){t.TrashNotes.unshift(e.note)},deleteTrashNote:function(t,e){t.trashNotes=t.trashNotes.filter((function(t){return t.id!=e.noteId}))},setCurTrashNote:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.curTrashNoteId=e.curTrashNoteId}},st={getTrashNotes:function(t){var e=t.commit;return et["a"].getAll().then((function(t){e("setTrashNotes",{trashNotes:t.data})}))},deleteTrashNote:function(t,e){var o=t.commit,n=e.noteId;return et["a"].deleteNote(n).then((function(t){o("deleteTrashNote",{noteId:n}),G["Message"].success(t.msg)}))},revertTrashNote:function(t,e){var o=t.commit,n=e.noteId;return et["a"].revertNote(n).then((function(t){o("deleteTrashNote",{noteId:n}),G["Message"].success(t.msg)}))}},it={state:ot,getters:nt,mutations:rt,actions:st},at={user:null},ct={username:function(t){return null===t.user?"未登录":t.user.username},slug:function(t){return null===t.user?"No":t.user.username.charAt(0)}},ut={setUser:function(t,e){t.user=e.user}},dt={login:function(t,e){var o=t.commit,n=e.username,r=e.password;return l["a"].login({username:n,password:r}).then((function(t){console.log(t),o("setUser",{user:t.data})}))},logout:function(t){var e=t.commit,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";return l["a"].logout().then((function(t){console.log(t.msg),e("setUser",{user:null}),M.push(o)}))},register:function(t,e){var o=t.commit,n=e.username,r=e.password;return l["a"].register({username:n,password:r}).then((function(t){o("setUser",{user:t.data})}))},checkLogin:function(t,e){var o=t.commit,n=t.state;return null!==n.user?Promise.resolve():l["a"].getInfo().then((function(t){t.isLogin?o("setUser",{user:t.data}):(console.log("jump"),M.push(e))}))}},lt={state:at,getters:ct,mutations:ut,actions:dt};n["default"].use(f["a"]);var ft=new f["a"].Store({modules:{notebook:z,note:tt,trash:it,user:lt}}),ht=ft;o("0fae");n["default"].use(V.a),n["default"].config.productionTip=!1,window.vm=new n["default"]({router:M,store:ht,render:function(t){return t(I)}}).$mount("#app"),window.alert("暂未适配移动端，想要更好的体验请到pc端")},"578a":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"login"}},[o("div",{staticClass:"modal-mask"},[o("div",{staticClass:"modal-wrapper"},[o("div",{staticClass:"modal-container"},[o("div",{staticClass:"main"}),o("div",{staticClass:"form"},[o("h3",{on:{click:t.showRegister}},[t._v("创建账户")]),o("transition",{attrs:{name:"slide"}},[o("div",{staticClass:"register",class:{show:t.isShowRegister}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.register.username,expression:"register.username"}],attrs:{type:"text",placeholder:"用户名"},domProps:{value:t.register.username},on:{input:function(e){e.target.composing||t.$set(t.register,"username",e.target.value)}}}),o("input",{directives:[{name:"model",rawName:"v-model",value:t.register.password,expression:"register.password"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:t.register.password},on:{input:function(e){e.target.composing||t.$set(t.register,"password",e.target.value)}}}),o("p",{class:{error:t.register.isError}},[t._v(t._s(t.register.notice))]),o("div",{staticClass:"button",on:{click:t.onRegister}},[t._v("创建账号")])])]),o("h3",{on:{click:t.showLogin}},[t._v("登录")]),o("transition",{attrs:{name:"slide"}},[o("div",{staticClass:"login",class:{show:t.isShowLogin}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.login.username,expression:"login.username"}],attrs:{type:"text",placeholder:"输入用户名"},domProps:{value:t.login.username},on:{input:function(e){e.target.composing||t.$set(t.login,"username",e.target.value)}}}),o("input",{directives:[{name:"model",rawName:"v-model",value:t.login.password,expression:"login.password"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:t.login.password},on:{input:function(e){e.target.composing||t.$set(t.login,"password",e.target.value)}}}),o("p",{class:{error:t.login.isError}},[t._v(t._s(t.login.notice))]),o("div",{staticClass:"button",on:{click:t.onLogin}},[t._v("登录")])])])],1)])])])])},r=[],s=o("5530"),i=(o("49c2"),o("90e8"),o("2f62")),a={name:"Login",data:function(){return{isShowLogin:!0,isShowRegister:!1,login:{username:"frank",password:"123456",notice:"请输入用户名和密码",isError:!1},register:{username:"",password:"",notice:"创建后请记住用户名和密码",isError:!1}}},methods:Object(s["a"])(Object(s["a"])({},Object(i["b"])({loginUser:"login",registerUser:"register"})),{},{showLogin:function(){this.isShowLogin=!0,this.isShowRegister=!1},showRegister:function(){this.isShowRegister=!0,this.isShowLogin=!1},onLogin:function(){var t=this,e=this.validUsername(this.login.username);if(!e.isValid)return this.login.isError=!0,void(this.login.notice=e.notice);var o=this.validPassword(this.login.password);if(!o.isValid)return this.login.isError=!0,void(this.login.notice=o.notice);console.log("登录成功，用户名是:"+this.login.username+" 密码是："+this.login.password),this.loginUser({username:this.login.username,password:this.login.password}).then((function(){t.login.isError=!1,t.login.notice="",t.$router.push({path:"notebooks"}),console.log("进行跳转")})).catch((function(e){t.login.isError=!0,t.login.notice=e.msg}))},onRegister:function(){var t=this,e=this.validUsername(this.register.username);if(!e.isValid)return this.register.isError=!0,void(this.register.notice=e.notice);var o=this.validPassword(this.register.password);if(!o.isValid)return this.register.isError=!0,void(this.register.notice=o.notice);console.log("开始注册，用户名是:"+this.register.username+" 密码是："+this.register.password),this.registerUser({username:this.register.username,password:this.login.password}).then((function(){t.register.isError=!1,t.register.notice="",t.$router.push({path:"notebooks"})})).catch((function(e){t.register.isError=!0,t.register.notice=e.msg}))},validUsername:function(t){return{isValid:/^[a-zA-Z_0-9\u4e00-\u9fa5]{3,15}$/.test(t),notice:"用户名必须是3-15个字符，仅限字母数字下划线中文"}},validPassword:function(t){return{isValid:/^.{4,16}$/.test(t),notice:"密码长度为4-16个字符"}}})},c=a,u=(o("7d57"),o("2877")),d=Object(u["a"])(c,n,r,!1,null,null,null);e["default"]=d.exports},"58fe":function(t,e,o){},"5c98":function(t,e,o){"use strict";o("859f")},"5fd5":function(t,e,o){"use strict";o("f3be")},6727:function(t,e,o){},"67fd":function(t,e,o){"use strict";o("6727")},7121:function(t,e,o){"use strict";o("dd83")},"77fe":function(t,e,o){},"7d57":function(t,e,o){"use strict";o("58fe")},"859f":function(t,e,o){},"85ec":function(t,e,o){},"8fab":function(t,e,o){},"90e8":function(t,e,o){"use strict";var n=o("2b0e");new n["default"]},b910:function(t,e,o){},c6db:function(t,e,o){"use strict";o("8fab")},d3c3:function(t,e,o){"use strict";o.d(e,"a",(function(){return r}));var n=o("53ca");function r(t){var e="object"===Object(n["a"])(t)?t:new Date(t),o=e.getTime(),r=Date.now(),s=r-o,i="";switch(!0){case s<6e4:i="刚刚";break;case s<36e5:i=Math.floor(s/6e4)+"分钟前";break;case s<864e5:i=Math.floor(s/36e5)+"小时前";break;default:i=Math.floor(s/864e5)+"天前"}return i}},d709:function(t,e,o){"use strict";o("4160"),o("d3b7"),o("ac1f"),o("5319"),o("159b");var n=o("2b7c"),r=o("d3c3"),s={GET:"/notes/trash",REVERT:"/notes/:noteId/revert",DELETE:"/notes/:noteId/confirm"};e["a"]={getAll:function(){return new Promise((function(t,e){Object(n["a"])(s.GET).then((function(e){e.data=e.data.sort((function(t,e){return t.createAt<e.createAt})),e.data.forEach((function(t){t.createdAtFriendly=Object(r["a"])(t.createdAt),t.updatedAtFriendly=Object(r["a"])(t.updatedAt)})),t(e)})).catch((function(t){e(t)}))}))},deleteNote:function(t){return Object(n["a"])(s.DELETE.replace(":noteId",t),"DELETE")},revertNote:function(t){return Object(n["a"])(s.REVERT.replace(":noteId",t),"PATCH")}}},dd83:function(t,e,o){},f3be:function(t,e,o){},f683:function(t,e,o){"use strict";o("b910")}});
//# sourceMappingURL=app.209bb01c.js.map